pre-commit:
    parallel: true
    commands:
        prettier:
            glob: "*.ts"
            include: "src/"
            run: prettier --list-different {staged_files}
        eslint:
            glob: "*.ts"
            include: "src/"
            run: eslint -f compact {staged_files}

commands: &commands
    commands:
        yarn-install:
            files: git diff --name-only HEAD main
            glob: "{package.json,yarn.lock}"
            run: yarn install
        build:
            files: git diff --name-only HEAD main
            glob: "*.ts"
            include: "src/"
            run: yarn build

post-merge:
    commands: *commands

post-rewrite:
    commands: *commands
